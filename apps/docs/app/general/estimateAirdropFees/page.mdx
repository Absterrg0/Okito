import { Callout } from 'nextra/components'
import PropsTable from '../..//PropsTable.jsx'

## `estimateAirdropFees`

Estimates total cost for an SPL token airdrop using local heuristics only. No transactions are sent and no RPC-dependent fee endpoints are called. The estimate includes:

- rent for new recipient token accounts (fixed rent exemption for 165-byte ATA)
- a local per-instruction fee model with a small buffer

<Callout type="info">
For large recipient lists, actual airdrops are split across multiple transactions. The estimator uses a per-instruction heuristic per batch and sums across batches; values are conservative and may differ from on-chain execution.
</Callout>

## Usage

``` jsx filename="page.tsx"
import { useConnection } from "@solana/wallet-adapter-react";
import { estimateAirdropFee, type AirdropRecipient } from "@okito/sdk";

const recipients: AirdropRecipient[] = [
  { address: "...", amount: 10n },
  { address: "...", amount: 20n },
];

const {connection} = useConnection();
const airdropFees = await estimateAirdropFee(connection, recipients, /* accountsToCreate */ 2);
```

## Parameters

<PropsTable
  rows={[
    { name: "connection", type: "Connection", description: "Solana connection instance." },
    { name: "recipients", type: "AirdropRecipient[]", description: "Recipient addresses and amounts (bigint recommended)." },
    { name: "accountsToCreate", type: "number", description: "How many recipient ATAs are expected to be created." },
    { name: "priorityFee", type: "number", description: "Optional priority fee in micro‑lamports.", default: "—" },
  ]}
/>

## Response

<PropsTable
  rows={[
    { name: "estimatedFee", type: "number", description: "Total estimated fee in lamports." },
    { name: "breakdown", type: `{ transactionFees: number; accountCreations: number; priorityFees: number; }`, description: "Component costs." },
  ]}
/>