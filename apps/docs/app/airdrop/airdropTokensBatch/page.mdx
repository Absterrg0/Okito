import { Callout } from 'nextra/components'
import PropsTable from '../../PropsTable.jsx'





# `airdropTokensBatch` 

This function performs large-scale airdrops using a batched approach.

## Usage

```jsx filename="page.tsx"
import { useConnection, useWallet } from "@solana/wallet-adapter-react";
import { airdropTokensBatch } from "@okito/sdk";

const {connection} = useConnection();
const wallet = useWallet();
const mintAddress = ""; // mint address for the token 
const recipients = [
    { address: "recipient1Address", amount: 100 },
    { address: "recipient2Address", amount: 200 },
    // ... thousands more recipients
];

const config = {
    batchSize: 15,
    batchDelayMs: 3000,
    progressCallback: (progress) => {
        console.log(`Progress: ${progress.completedBatches}/${progress.totalBatches} batches completed`);
    }
};

const airdropResult = await airdropTokensBatch(connection, wallet, mintAddress, recipients, config);
```

## Capabilities

<Callout type="info">
- Handles large recipient lists in batches
- Optional progress callback for UI feedback
- Per-batch retries with delays
</Callout>

## Parameters

<PropsTable
  rows={[
    {
      name: "connection",
      type: "Connection",
      description: "The connection object to the Solana blockchain.",
      default: "—",
    },
    {
      name: "wallet",
      type: "SignerWallet",
      description: "The wallet object of the sender.",
      default: "—",
    },
    {
      name: "mint",
      type: "string",
      description: "The mint address of the token being airdropped.",
      default: "—",
    },
    {
      name: "recipients",
      type: "AirdropRecipient[]",
      description: "Array of recipients (unlimited for large safe airdrop).",
      default: "[]"
    },
    {
      name: "config",
      type: "AirdropInBatchesConfig",
      description: "Configuration for the large-scale airdrop operation.",
      default: "{}"
    }
  ]}
/>

### AirdropInBatchesConfig

<PropsTable
  rows={[
    {
      name: "batchSize",
      type: "number",
      description: "Number of recipients per batch (max 20).",
      default: "15",
    },
    {
      name: "batchDelayMs",
      type: "number",
      description: "Delay between batches in milliseconds (min 2000).",
      default: "3000",
    },
    {
      name: "maxBatchRetries",
      type: "number",
      description: "Maximum retry attempts per batch.",
      default: "3",
    },
    {
      name: "preflightValidation",
      type: "boolean",
      description: "Enable comprehensive preflight validation.",
      default: "true",
    },
    {
      name: "networkStabilityCheck",
      type: "boolean",
      description: "Check network stability before execution.",
      default: "true",
    },
    {
      name: "progressCallback",
      type: "(progress: AirdropProgress) => void",
      description: "Callback function for progress updates.",
      default: "undefined",
    },
    {
      name: "pauseOnError",
      type: "boolean",
      description: "Pause execution on repeated batch failures.",
      default: "false",
    },
    {
      name: "dryRun",
      type: "boolean",
      description: "Simulate the operation without sending transactions.",
      default: "false",
    },
    {
      name: "confirmationStrategy",
      type: "'processed' | 'confirmed' | 'finalized'",
      description: "Transaction confirmation level.",
      default: "'finalized'",
    },
    {
      name: "priorityFee",
      type: "number",
      description: "Priority fee in micro-lamports.",
      default: "50000",
    },
    {
      name: "createRecipientAccount",
      type: "boolean",
      description: "Automatically create recipient token accounts.",
      default: "true",
    }
  ]}
/>

### AirdropProgress

<PropsTable
  rows={[
    {
      name: "totalBatches",
      type: "number",
      description: "Total number of batches to process.",
      default: "—"
    },
    {
      name: "completedBatches",
      type: "number",
      description: "Number of batches completed successfully.",
      default: "—"
    },
    {
      name: "failedBatches",
      type: "number",
      description: "Number of batches that failed.",
      default: "—"
    },
    {
      name: "totalRecipients",
      type: "number",
      description: "Total number of recipients.",
      default: "—"
    },
    {
      name: "processedRecipients",
      type: "number",
      description: "Number of recipients processed successfully.",
      default: "—"
    },
    {
      name: "failedRecipients",
      type: "number",
      description: "Number of recipients that failed.",
      default: "—"
    },
    {
      name: "currentBatch",
      type: "number | undefined",
      description: "Currently processing batch number.",
      default: "—"
    },
    {
      name: "estimatedTimeRemaining",
      type: "number | undefined",
      description: "Estimated time remaining in milliseconds.",
      default: "—"
    },
    {
      name: "lastTransactionId",
      type: "string | undefined",
      description: "Last successful transaction ID.",
      default: "—"
    }
  ]}
/>

### Response (Large Safe Airdrop)

<PropsTable
  rows={[
    {
      name: "success",
      type: "boolean",
      description: "Whether the overall airdrop operation was successful.",
      default: "—"
    },
    {
      name: "transactionId",
      type: "string | undefined",
      description: "The first transaction ID (for compatibility).",
      default: "—"
    },
    {
      name: "transactionIds",
      type: "string[] | undefined",
      description: "Array of all transaction IDs from successful batches.",
      default: "—"
    },
    {
      name: "estimatedFee",
      type: "number",
      description: "Estimated total fee in lamports.",
      default: "—"
    },
    {
      name: "actualFee",
      type: "number",
      description: "Actual total fee paid in lamports.",
      default: "—"
    },
    {
      name: "confirmationTime",
      type: "number",
      description: "Total time taken for the operation in milliseconds.",
      default: "—"
    },
    {
      name: "recipientsProcessed",
      type: "number",
      description: "Number of recipients successfully processed.",
      default: "—"
    },
    {
      name: "recipientsFailed",
      type: "number | undefined",
      description: "Number of recipients that failed.",
      default: "—"
    },
    {
      name: "accountsCreated",
      type: "number",
      description: "Total number of token accounts created.",
      default: "—"
    },
    {
      name: "totalAmountSent",
      type: "string",
      description: "Total amount of tokens sent (in raw token units).",
      default: "—"
    },
    {
      name: "batchCount",
      type: "number | undefined",
      description: "Total number of batches processed.",
      default: "—"
    },
    {
      name: "successfulBatches",
      type: "number | undefined",
      description: "Number of batches completed successfully.",
      default: "—"
    },
    {
      name: "failedBatches",
      type: "number | undefined",
      description: "Number of batches that failed.",
      default: "—"
    },
    {
      name: "successRate",
      type: "number | undefined",
      description: "Success rate as a percentage (0-100).",
      default: "—"
    },
    {
      name: "error",
      type: "string | undefined",
      description: "Error message if the operation failed.",
      default: "—"
    }
  ]}
/>
